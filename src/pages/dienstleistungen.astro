---
import Layout from '../layouts/Layout.astro';
import { client } from '../lib/sanity';

// Fetch services from Sanity with all needed fields
const services = await client.fetch(`*[_type == "service"]{
  title,
  "subtitle": subtitle, 
  description,
  "image": image.asset->url,
  "id": _id
}`);
---

<Layout title="Unsere Leistungen">
  <section class="pt-40 pb-20 px-8 md:px-24">
    <p class="text-brand font-bold uppercase tracking-[0.3em] mb-4 text-xs italic">Portfolio</p>
    <h1 class="text-[clamp(3rem,8vw,6rem)] font-black uppercase leading-[0.85] mb-12">
      Unsere <br />
      <span class="text-transparent stroke-black" style="-webkit-text-stroke: 1.5px black;">Dienstleistungen</span>
    </h1>
  </section>

  <section class="pb-32 px-8 md:px-24">
    <div class="flex flex-col gap-32">
      {services.map((service, index) => (
        <div class={`grid md:grid-cols-12 gap-12 items-center ${index % 2 !== 0 ? 'md:flex-row-reverse' : ''}`}>
          
          <div class={`md:col-span-5 ${index % 2 !== 0 ? 'md:order-2' : ''}`}>
            {/* We use index + 1 to show 01, 02, etc. */}
            <span class="text-6xl font-black text-slate-100 block mb-4 italic leading-none">0{index + 1}</span>
            <p class="text-brand font-bold uppercase tracking-widest text-[10px] mb-2">{service.subtitle}</p>
            <h2 class="text-4xl font-black uppercase mb-6 tracking-tighter leading-none">{service.title}</h2>
            <p class="text-lg text-slate-600 leading-relaxed mb-8">
              {service.description}
            </p>
              <a href="/kontakt" 
              class="inline-block bg-brand text-white px-6 py-4 md:px-12 md:py-5 text-sm md:text-base font-black uppercase tracking-widest hover:bg-white hover:text-black transition-all"
            >
              Individuelles Angebot
            </a>
          </div>

          <div class="md:col-span-7 overflow-hidden bg-slate-100 aspect-[16/9]">
            <img 
              src={service.image} 
              alt={service.title} 
              class="w-full h-full object-cover  transition-all duration-700 ease-in-out scale-105 hover:scale-100"
            />
          </div>
          
        </div>
      ))}
    </div>
  </section>

  <section class="bg-black text-white py-24 px-8 md:px-24 text-center">
    <h2 class="text-3xl md:text-5xl font-black uppercase mb-8 italic">Nicht das Richtige dabei?</h2>
    <p class="text-slate-400 mb-12 max-w-xl mx-auto uppercase tracking-widest text-xs font-bold">
      Wir erstellen individuelle Konzepte f√ºr Ihre speziellen Anforderungen. Sprechen Sie uns an.
    </p>
    <a href="/kontakt" class="bg-brand text-white px-12 py-5 font-black uppercase tracking-widest hover:bg-white hover:text-black transition-all">
      Individuelles Angebot
    </a>
  </section>
</Layout>